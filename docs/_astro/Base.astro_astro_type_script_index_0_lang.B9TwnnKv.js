(function(){try{let p=function(){if(!l)return;const i=matchMedia("(max-width: 768px)").matches,m=Math.max(240,Math.round(document.documentElement.scrollHeight*.2));i&&window.scrollY>m?(l.hidden=!1,l.classList.add("is-visible")):l.classList.remove("is-visible")};document.querySelectorAll('nav .nav-links a[href^="/"]').forEach(i=>{try{new URL(i.href,location.origin).pathname===location.pathname&&i.setAttribute("aria-current","page")}catch{}});const E=()=>{const i=new URLSearchParams({utm_source:"www",utm_medium:"cta",utm_campaign:document.querySelector("[data-position]")?.getAttribute("data-position")||"site"});function m(e){try{const c=e.getAttribute("href");if(!c||c.startsWith("mailto:")||c.startsWith("tel:"))return;const o=new URL(c,location.origin);if(o.origin!==location.origin)return;const n=new URLSearchParams(o.search);i.forEach((a,d)=>{n.has(d)||n.set(d,a)}),o.search=n.toString(),e.setAttribute("href",o.pathname+(o.search?"?"+o.search:"")+(o.hash||""))}catch{}}document.querySelectorAll("a[data-ev]")?.forEach(m);const r=document.getElementById("nav-open"),g=document.getElementById("nav-close"),s=document.getElementById("mobile-nav");function w(e){r&&s&&(r.setAttribute("aria-expanded",String(e)),s.hidden=!1,s.style.transform=e?"translateY(0)":"translateY(-100%)",e||setTimeout(()=>{s&&(s.hidden=!0)},180))}function L(){return matchMedia("(max-width: 768px)").matches}r&&s&&(r.style.display=L()?"inline-flex":"none",window.addEventListener("resize",()=>r.style.display=L()?"inline-flex":"none"),r.addEventListener("click",()=>w(!0)),g&&g.addEventListener("click",()=>w(!1)),document.addEventListener("keydown",e=>{e.key==="Escape"&&w(!1)}));const A="analytics_consent",S=navigator.doNotTrack==="1"||window.doNotTrack==="1";function u(e){S||localStorage.getItem(A)!=="yes"||(window.dataLayer=window.dataLayer||[],window.dataLayer.push(e))}const _=Array.from(document.querySelectorAll("[data-menu]")),q=Array.from(document.querySelectorAll('[aria-haspopup="true"]'));function f(){q.forEach(e=>e.setAttribute("aria-expanded","false")),_.forEach(e=>e.hidden=!0),matchMedia("(max-width: 768px)").matches&&(document.documentElement.style.overflow="")}const b=document.querySelector("nav");b&&b.addEventListener("mouseleave",f),document.addEventListener("keydown",e=>{e.key==="Escape"&&f()});function h(e,c,o){const n=document.getElementById(e),a=document.getElementById(c);if(!(n&&a))return;let d=null;function y(){f(),n.setAttribute("aria-expanded","true"),a.hidden=!1,matchMedia("(max-width: 768px)").matches&&(document.documentElement.style.overflow="hidden"),u({event:"menu_open",menu:o})}function k(){n.setAttribute("aria-expanded","false"),a.hidden=!0}n.addEventListener("mouseenter",()=>{clearTimeout(d),d=setTimeout(y,120)}),n.addEventListener("mouseleave",()=>{clearTimeout(d)}),n.addEventListener("click",t=>{if(n.getAttribute("aria-expanded")==="true")t.preventDefault(),k();else{const x=n.id==="btn-products"?`${location.origin}/empowernow_info/products/`:n.id==="btn-solutions"?`${location.origin}/empowernow_info/solutions/`:"";x?t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||(t.preventDefault(),location.href=x,window.dataLayer=window.dataLayer||[],u({event:"menu_hub_click",menu:o,source:"label"})):(t.preventDefault(),y())}}),n.addEventListener("focus",()=>setTimeout(y,0)),n.addEventListener("keydown",t=>{(t.key==="ArrowDown"||t.key===" ")&&(t.preventDefault(),y(),a.querySelector(".mega-cta")?.focus?.())}),a.addEventListener("mouseleave",k),document.addEventListener("click",t=>{const v=t.target;!v.closest(".nav-group")&&!v.closest("[data-menu]")&&f()}),a.querySelectorAll(".mega-card .link").forEach(t=>t.addEventListener("click",()=>u({event:"menu_item_click",menu:o,item:t.closest(".mega-card")?.querySelector(".h3")?.textContent?.trim()||""})))}h("btn-products","menu-products","products"),h("btn-solutions","menu-solutions","solutions"),h("btn-resources","menu-resources","resources"),h("btn-company","menu-company","company"),document.getElementById("cta-products-hub")?.addEventListener("click",()=>u({event:"menu_hub_click",menu:"products",source:"cta"})),document.getElementById("cta-solutions-hub")?.addEventListener("click",()=>u({event:"menu_hub_click",menu:"solutions",source:"cta"}))};"requestIdleCallback"in window?window.requestIdleCallback(E):setTimeout(E,0);const l=document.getElementById("sticky-cta");window.addEventListener("scroll",p,{passive:!0}),window.addEventListener("resize",p),p()}catch{}})();
