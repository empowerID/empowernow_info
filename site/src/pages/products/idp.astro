---
import Base from '../../layouts/Base.astro';
import Product from '../../layouts/Product.astro';
import JsonLd from '../../components/JsonLd.astro';
const title = 'IdP for AI Agents | EmpowerNow';
const description = 'Purpose‑built IdP for AI agents: Token Exchange + RAR + DPoP, consent at issuance, resource‑targeted audiences, identity federation.';
const canonical = '/products/idp/';
const jsonLdProduct = {"@context":"https://schema.org","@type":"Product","name":"IdP","brand":{"@type":"Brand","name":"EmpowerNow"},"description":description,"url":new URL(canonical, Astro.site)};
---
<Base title={title} description={description} canonical={canonical}>
	<JsonLd data={jsonLdProduct} />
    <Product title={title} description={description} canonical={canonical} productKey="idp" eyebrow="IDENTITY PROVIDER" headline="IdP for AI agents" subhead="Issue purpose‑bound Agent Passports (TE + RAR + DPoP) with consent, budgets, and schema/plan pins—made for agents, not browsers." targetICP={[ 'Platform Teams', 'Security', 'Compliance' ]} keyBenefits={[ 'Agent→user binding (authorize on sub; track act.sub)', 'Consent at issuance; obligations before mint', 'Resource‑targeted audiences (RFC 8707)', 'Optional DPoP (proof‑of‑possession)' ]} benefitIcons={[ 'icon-auth-passport.png', 'icon-shield-aria.png', 'icon-link-oauth.png', 'icon-lock-authzen.png' ]} primaryCTA={{ label: 'Book demo', href: `${import.meta.env.BASE_URL}demo/` }} secondaryCTA={{ label: 'What is ARIA?', href: `${import.meta.env.BASE_URL}products/aria/` }} tertiaryCTA={{ label: 'Decision contract (PDP)', href: `${import.meta.env.BASE_URL}products/pdp/` }} docsLinks={[ { href: 'https://empowerid.github.io/empowernow_docs/docs/services/idp/', label: 'IdP Docs' } ]} wwwLinks={[ { href: '/products/gateway/', label: 'Gateway (enforcement)' }, { href: '/solutions/ai-agent-governance/', label: 'AI Agent Governance' } ]} keywords={[ 'oauth te','rar','dpop','oidc','scim','caep','rfc8707' ]} heroIllustration="images/illustrations/large/products/hero-products-idp.png" heroIllustrationAlt="Visual representation of structured identity architecture with modular components" heroIllustrationWidth={800} heroIllustrationHeight={600}>
        <fragment slot="standards">
            <div class="status-row">
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/token-exchange/`}>OAuth TE</a>
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/rar/`}>RAR</a>
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/dpop/`}>DPoP</a>
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/oidc/`}>OIDC</a>
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/scim/`}>SCIM</a>
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/caep/`}>CAEP</a>
                <a class="chip chip--outline-cyan" href={`${import.meta.env.BASE_URL}resources/standards/resource-indicators/`}>RFC 8707</a>
            </div>
        </fragment>
        <fragment slot="examples">
            <div class="card-grid">
                <div class="ns-card"><h3>GitHub Admin Passport</h3><p>Scope + step‑up enforced.</p></div>
                <div class="ns-card"><h3>Copilot delegated action</h3><p>Consent before issuance.</p></div>
            </div>
        </fragment>
		<fragment slot="how">
			<section id="idp-why-purpose-built" class="container" style="padding:8px 0 24px">
				<h2 class="section-title">Why purpose‑built for agents</h2>
				<ul style="color:#9ba3b7;line-height:1.8;margin:6px 0 0;padding-left:18px">
					<li>Agent→user binding; authorize on <code>sub</code>, record <code>act.sub</code>, keep client in <code>azp</code></li>
					<li>Batched capability asks (RAR) with optional PAR/JARM</li>
					<li>Consent at issuance; obligations handled before tokens mint</li>
					<li>Proof‑of‑possession (DPoP) for agent runtimes</li>
					<li>Resource‑targeted audiences (RFC 8707) → fewer 401s</li>
				</ul>
			</section>
			<section id="idp-federation" class="container" style="padding:8px 0 24px">
				<h2 class="section-title">Using External IdPs with EmpowerNow</h2>
				<p style="color:#9ba3b7">Federate to your corporate IdP (Microsoft Entra ID, Okta, Auth0) for login, then complete OAuth/OIDC locally so you retain control of token issuance, claims, and policy.</p>
				<h3>Use cases</h3>
				<ul>
					<li>Standardize tokens across apps while using the corporate IdP for login</li>
					<li>Migrate or multi‑IdP with a unified claims contract</li>
					<li>Step‑up and consent based on risk/policy—even after upstream auth</li>
					<li>Fine‑grained API authorization with consistent scopes/claims</li>
					<li>Developer tokens and introspection alongside JWTs</li>
				</ul>
				<h3>Federate but orchestrate</h3>
				<ul>
					<li>Redirect to upstream for login; return and orchestrate locally</li>
					<li>Apply obligations (step‑up MFA, consent, risk) and bind sessions</li>
					<li>Outcome parity with “authentication actions” via policy‑driven rules</li>
				</ul>
				<h3>Collaborative adaptive authentication</h3>
				<ul>
					<li>Normalize upstream attributes to canonical claims; decide locally</li>
					<li>Emit identity events for analytics and adaptive posture</li>
				</ul>
				<h3>Standards we implement for agents</h3>
				<p style="color:#9ba3b7">Auth Code + PKCE, Refresh, Client Credentials, Introspection. Optional: PAR, JARM‑style JWT responses, CIBA, DPoP, RFC 8693 Token Exchange, JWE/JWS. Discovery advertises supported grants/algorithms; middleware can enforce FAPI‑style rigor.</p>
				<div class="glass-card" style="padding:12px;margin-top:8px">
					<ul style="margin:0;color:#9ba3b7;line-height:1.8;padding-left:18px">
						<li>RFC 8693 Token Exchange (OBO)</li>
						<li>RAR (batched capabilities) + PAR/JARM</li>
						<li>DPoP (RFC 9449) token binding</li>
						<li>RFC 8707 Resource Indicators (audience)</li>
						<li>OIDC Discovery + JWKS</li>
					</ul>
				</div>
				<h3>Minimal RAR object</h3>
				<pre class="glass-card" style="padding:12px;overflow:auto"><code>{`
{
  "authorization_details": [
    {
      "type": "tool",
      "actions": ["invoke"],
      "resource": "billing.export",
      "locations": ["https://api.example.com"],
      "dat": { "purpose": "monthly_report" }
    }
  ]
}
`}</code></pre>
				<h3>Claims & scopes</h3>
				<ul>
					<li>Canonical identity‑first claims with provenance (`orig_iss`, `orig_sub`)</li>
					<li>Composable claims merged from upstream + internal sources</li>
					<li>Per‑client customization without leaking provider specifics</li>
					<li>Introspection parity for local/external tokens</li>
				</ul>
				<h3>Architecture at a glance</h3>
				<ol>
					<li>Login at corporate IdP → return to EmpowerNow</li>
					<li>Orchestrate obligations and assurances</li>
					<li>Issue policy‑controlled tokens / introspection with canonical claims</li>
					<li>Enforce with PDP/services; analytics feed adaptive auth</li>
				</ol>
				<h3>Getting started</h3>
				<ol>
					<li>Configure upstream provider (discovery/JWKS, redirect URIs)</li>
					<li>Enable federation and mapping</li>
					<li>Define canonical claims and any internal sources</li>
					<li>Enable advanced features as required; verify via discovery</li>
					<li>Test end‑to‑end (login, step‑up, issuance, introspection)</li>
				</ol>
			</section>
		</fragment>
	</Product>
    <!-- Audience control callout (RFC 8707) -->
    <section id="idp-audience-control" class="container" style="padding:8px 0 16px">
        <div class="panel-glass" style="padding:16px">
            <h2 class="section-title" style="margin-top:0">Audience control (RFC 8707)</h2>
            <p style="color:#9ba3b7;max-width:90ch;margin:0">Set the <code>resource</code> and we mint the right audience—no more 401s from mismatched <code>aud</code>.</p>
        </div>
    </section>
    <!-- Identity ARNs & federation mapping -->
    <section id="idp-identity-arns" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">Identity ARNs & federation</h2>
        <p style="color:#9ba3b7;max-width:90ch">Identity‑first subjects across IdPs (account ARN → identity ARN) mean you write policy once and reuse everywhere.</p>
        <div style="margin-top:8px"><a class="btn btn-ghost" href={`${import.meta.env.BASE_URL}resources/strategy/contracts/`}>Identity ARNs explainer →</a></div>
    </section>
    <!-- Consent at issuance -->
    <section id="idp-consent" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">Consent at issuance</h2>
        <p style="color:#9ba3b7;max-width:90ch">If policy requires consent, issuance pauses with a standards‑friendly <code>authorization_pending</code> and resumes when approved.</p>
        <ul style="display:flex;gap:8px;flex-wrap:wrap;color:#9ba3b7;margin:10px 0 0">
            <li class="chip">Subject‑only</li>
            <li class="chip">Manager‑approved</li>
            <li class="chip">Dual approvals</li>
        </ul>
    </section>
    <!-- Dev‑tool access (PATs) -->
    <section id="idp-dev-tool-access" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">Dev‑tool access (PATs)</h2>
        <p style="color:#9ba3b7;max-width:90ch">Scoped Personal Access Tokens for OpenAI/Anthropic proxies—no vendor keys in clients. Introspect, short cache, enforce scopes, emit receipts.</p>
    </section>
    <!-- Passport → PDP → Gateway → Receipt chain -->
    <section id="idp-passport-usage" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">How the Passport is used</h2>
        <ul style="color:#9ba3b7;line-height:1.8;padding-left:18px;margin:0 0 10px">
            <li>Passport</li>
            <li>PDP decision</li>
            <li>Gateway guardrails</li>
            <li>Receipt</li>
        </ul>
        <div style="display:flex;gap:8px;flex-wrap:wrap"><a class="btn" href={`${import.meta.env.BASE_URL}products/gateway/`}>Gateway</a><a class="btn btn-ghost" href={`${import.meta.env.BASE_URL}products/receipts/`}>Receipts</a></div>
    </section>
    <!-- AI scenarios -->
    <section id="idp-ai-scenarios" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">AI scenarios</h2>
        <div class="card-grid">
            <div class="ns-card"><h3>Agent on‑behalf‑of</h3><p>OBO with <code>sub/act/azp</code> and delegation id.</p></div>
            <div class="ns-card"><h3>Batched capability ask</h3><p>RAR across tools; single mint.</p></div>
            <div class="ns-card"><h3>DPoP‑bound tool call</h3><p>Sender‑constrained tokens for agents.</p></div>
        </div>
    </section>
    <!-- Proof & performance -->
    <section id="idp-proof" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">Proof & performance</h2>
        <div class="glass-card" style="padding:16px">
            <ul style="margin:0;color:#9ba3b7;line-height:1.8;padding-left:18px">
                <li>Discovery/JWKS for easy verification</li>
                <li>RAR snippet and examples in docs</li>
                <li>P95 issuance targets with cache</li>
            </ul>
        </div>
    </section>
    <!-- FAQ -->
    <section id="idp-faq" class="container" style="padding:8px 0 24px">
        <h2 class="section-title">FAQ</h2>
        <div class="glass-card" style="padding:16px;color:#9ba3b7">
            <ul style="margin:0;line-height:1.8">
                <li><strong>Replace corporate IdP?</strong> No—federate for login, issue Passports here.</li>
                <li><strong>Delegation for every call?</strong> Only agents and elevated service routes.</li>
                <li><strong>401 audience?</strong> Use <code>resource</code> (RFC 8707) to set <code>aud</code> precisely.</li>
            </ul>
        </div>
    </section>
</Base>
