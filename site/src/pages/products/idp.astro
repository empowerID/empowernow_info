---
import Base from '../../layouts/Base.astro';
import Product from '../../layouts/Product.astro';
import JsonLd from '../../components/JsonLd.astro';
const title = 'IdP — Agent Passports & Consent';
const description = 'Issue ARIA Passports that bind an agent to a user, capture consent with obligations, and enable budget envelopes.';
const canonical = '/products/idp/';
const jsonLdProduct = {"@context":"https://schema.org","@type":"Product","name":"IdP","brand":{"@type":"Brand","name":"EmpowerNow"},"description":description,"url":new URL(canonical, Astro.site)};
---
<Base title={title} description={description} canonical={canonical}>
	<JsonLd data={jsonLdProduct} />
	<Product title={title} description={description} canonical={canonical} headline="Bind agents to users and capture consent up front" subhead="Issue ARIA Passports, collect explicit user consent, and attach obligations that downstream services enforce." targetICP={[ 'Platform Teams', 'Security', 'Compliance' ]} keyBenefits={[ 'Strong agent binding to user identity', 'Pre‑issuance consent with obligations', 'Budget envelopes for spend governance' ]} primaryCTA={{ label: 'Book demo', href: '/demo/' }} secondaryCTA={{ label: 'Read docs', href: 'https://empowerid.github.io/empowernow_docs/docs/services/idp/' }} docsLinks={[ { href: 'https://empowerid.github.io/empowernow_docs/docs/services/idp/', label: 'IdP Docs' } ]} wwwLinks={[ { href: '/solutions/agent-safe-tools/', label: 'Agent-Safe Tools' } ]} keywords={[ 'mcp', 'authzen' ]}>
		<fragment slot="how">
			<section class="container" style="padding:8px 0 24px">
				<h2 class="section-title">How it works</h2>
				<p style="color:#9ba3b7">Users grant consent at issuance time; obligations are carried on the ARIA Passport and enforced by Gateway and BFF.</p>
			</section>
			<section class="container" style="padding:8px 0 24px">
				<h2 class="section-title">Using External IdPs with EmpowerNow</h2>
				<p style="color:#9ba3b7">Federate to your corporate IdP (Microsoft Entra ID, Okta, Auth0) for login, then complete OAuth/OIDC locally so you retain control of token issuance, claims, and policy.</p>
				<h3>Use cases</h3>
				<ul>
					<li>Standardize tokens across apps while using the corporate IdP for login</li>
					<li>Migrate or multi‑IdP with a unified claims contract</li>
					<li>Step‑up and consent based on risk/policy—even after upstream auth</li>
					<li>Fine‑grained API authorization with consistent scopes/claims</li>
					<li>Developer tokens and introspection alongside JWTs</li>
				</ul>
				<h3>Federate but orchestrate</h3>
				<ul>
					<li>Redirect to upstream for login; return and orchestrate locally</li>
					<li>Apply obligations (step‑up MFA, consent, risk) and bind sessions</li>
					<li>Outcome parity with “authentication actions” via policy‑driven rules</li>
				</ul>
				<h3>Collaborative adaptive authentication</h3>
				<ul>
					<li>Normalize upstream attributes to canonical claims; decide locally</li>
					<li>Emit identity events for analytics and adaptive posture</li>
				</ul>
				<h3>OAuth/OIDC features</h3>
				<p style="color:#9ba3b7">Auth Code + PKCE, Refresh, Client Credentials, Introspection. Optional: PAR, JARM‑style JWT responses, CIBA, DPoP, RFC 8693 Token Exchange, JWE/JWS. Discovery advertises supported grants/algorithms; middleware can enforce FAPI‑style rigor.</p>
				<h3>Claims & scopes</h3>
				<ul>
					<li>Canonical identity‑first claims with provenance (`orig_iss`, `orig_sub`)</li>
					<li>Composable claims merged from upstream + internal sources</li>
					<li>Per‑client customization without leaking provider specifics</li>
					<li>Introspection parity for local/external tokens</li>
				</ul>
				<h3>Architecture at a glance</h3>
				<ol>
					<li>Login at corporate IdP → return to EmpowerNow</li>
					<li>Orchestrate obligations and assurances</li>
					<li>Issue policy‑controlled tokens / introspection with canonical claims</li>
					<li>Enforce with PDP/services; analytics feed adaptive auth</li>
				</ol>
				<h3>Getting started</h3>
				<ol>
					<li>Configure upstream provider (discovery/JWKS, redirect URIs)</li>
					<li>Enable federation and mapping</li>
					<li>Define canonical claims and any internal sources</li>
					<li>Enable advanced features as required; verify via discovery</li>
					<li>Test end‑to‑end (login, step‑up, issuance, introspection)</li>
				</ol>
			</section>
		</fragment>
	</Product>
</Base>
