---
export interface Props {
  reducedMotion?: boolean;
}
const { reducedMotion = false } = Astro.props as Props;
---
<div class="aria-diagram" aria-label="ARIA: AI Agent Authorization diagram">
  <style>
    @keyframes float { 0%,100% { transform: translateY(0) } 50% { transform: translateY(-12px) } }
    @keyframes pulse { 0%,100% { opacity:.5 } 50% { opacity:1 } }
    @keyframes flowDash { 0% { stroke-dashoffset:24 } 100% { stroke-dashoffset:0 } }
    .float{ animation: float 4s ease-in-out infinite }
    .pulse{ animation: pulse 3s ease-in-out infinite }
    .flow-dash{ stroke-dasharray:12 6; animation: flowDash 2s linear infinite }
    @media (prefers-reduced-motion: reduce) {
      .float,.pulse,.flow-dash{ animation: none !important }
    }
  </style>
  <div style="width:100%;min-height:1000px;background:#0E0E10;padding:8px;display:flex;align-items:center;justify-content:center;overflow:hidden;border-radius:12px">
    <svg viewBox="0 0 1600 1000" style="width:100%;max-width:1200px;max-height:1000px">
      <defs>
        <linearGradient id="bgGradient" x1="0%" y1="0%" x2="100%" y2="100%">
          <stop offset="0%" stop-color="#0E0E10" stop-opacity="1" />
          <stop offset="25%" stop-color="#0B1C3D" stop-opacity=".4" />
          <stop offset="50%" stop-color="#1a0b2e" stop-opacity=".3" />
          <stop offset="75%" stop-color="#0B1C3D" stop-opacity=".4" />
          <stop offset="100%" stop-color="#0E0E10" stop-opacity="1" />
        </linearGradient>
        <filter id="glow"><feGaussianBlur stdDeviation="6" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <filter id="glowStrong"><feGaussianBlur stdDeviation="12" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <filter id="glowXtra"><feGaussianBlur stdDeviation="18" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
        <marker id="arrowCyan" markerWidth="14" markerHeight="14" refX="12" refY="4" orient="auto"><path d="M0,0 L0,8 L12,4 z" fill="#00E7F6"/></marker>
        <marker id="arrowPurple" markerWidth="14" markerHeight="14" refX="12" refY="4" orient="auto"><path d="M0,0 L0,8 L12,4 z" fill="#B326FF"/></marker>
        <marker id="arrowOrange" markerWidth="14" markerHeight="14" refX="12" refY="4" orient="auto"><path d="M0,0 L0,8 L12,4 z" fill="#FF6B35"/></marker>
        <radialGradient id="cardGlowCyan" cx="50%" cy="50%"><stop offset="0%" stop-color="#00E7F6" stop-opacity=".2"/><stop offset="100%" stop-color="#00E7F6" stop-opacity="0"/></radialGradient>
        <radialGradient id="cardGlowPurple" cx="50%" cy="50%"><stop offset="0%" stop-color="#B326FF" stop-opacity=".3"/><stop offset="100%" stop-color="#B326FF" stop-opacity="0"/></radialGradient>
        <radialGradient id="cardGlowOrange" cx="50%" cy="50%"><stop offset="0%" stop-color="#FF6B35" stop-opacity=".25"/><stop offset="100%" stop-color="#FF6B35" stop-opacity="0"/></radialGradient>
      </defs>
      <rect width="1600" height="1000" fill="url(#bgGradient)"/>
      <g class="pulse" opacity=".15">
        <circle cx="200" cy="150" r="150" fill="url(#cardGlowCyan)"/>
        <circle cx="1400" cy="300" r="180" fill="url(#cardGlowPurple)"/>
        <circle cx="800" cy="850" r="200" fill="url(#cardGlowOrange)"/>
        <circle cx="400" cy="700" r="120" fill="url(#cardGlowCyan)"/>
        <circle cx="1200" cy="750" r="160" fill="url(#cardGlowPurple)"/>
      </g>
      <g>
        <rect x="720" y="35" width="160" height="48" rx="24" fill="rgba(0,231,246,.1)" stroke="#00E7F6" stroke-width="2"/>
        <circle cx="745" cy="59" r="10" fill="#00E7F6" opacity=".8"/>
        <path d="M745 54 L745 64 M740 59 L750 59" stroke="#0E0E10" stroke-width="2" stroke-linecap="round"/>
        <text x="765" y="67" fill="#FFFFFF" font-size="28" font-weight="700" letter-spacing="2" font-family="Inter, ui-sans-serif">ARIA</text>
      </g>
      <text x="800" y="110" fill="#FFFFFF" font-size="36" font-weight="600" text-anchor="middle" font-family="Inter, ui-sans-serif">AI Agent Authorization Platform</text>
      <line x1="640" y1="130" x2="960" y2="130" stroke="#00E7F6" stroke-width="1" opacity=".3"/>
      <text x="800" y="150" fill="#00E7F6" font-size="14" font-weight="500" letter-spacing="1" text-anchor="middle" font-family="Inter, ui-sans-serif">AGENT RISK & IDENTITY AUTHORIZATION</text>
      <text x="800" y="178" fill="#E8EDF5" font-size="16" font-weight="400" text-anchor="middle" font-family="Inter, ui-sans-serif">Dual enforcement boundaries for secure agent delegation</text>
      <!-- Scenario box -->
      <g class="float" style="animation-delay:0s">
        <ellipse cx="270" cy="235" rx="240" ry="90" fill="url(#cardGlowCyan)" opacity=".3"/>
        <rect x="80" y="210" width="380" height="110" rx="16" fill="rgba(11,28,61,.7)" stroke="#00E7F6" stroke-width="3"/>
        <rect x="80" y="210" width="380" height="42" rx="16" fill="rgba(0,231,246,.15)"/>
        <text x="110" y="242" fill="#00E7F6" font-size="19" font-weight="700" font-family="Inter, ui-sans-serif">ðŸŽ¯ Scenario: Delegated Travel Agent</text>
        <text x="110" y="275" fill="#FFFFFF" font-size="16" font-weight="600" font-family="Inter, ui-sans-serif">Alice Chen â†’ Travel Agent</text>
        <text x="110" y="300" fill="#C5CAD9" font-size="14" font-family="Inter, ui-sans-serif">Budget: $2000/trip â€¢ Spend enforced at runtime</text>
      </g>
      <!-- Minimal node/flow subset (keeps component lightweight yet complete) -->
      <g class="float" style="animation-delay:.2s">
        <circle cx="200" cy="420" r="55" fill="rgba(11,28,61,.8)" stroke="#00E7F6" stroke-width="4"/>
        <text x="200" y="420" dy="5" fill="#FFFFFF" font-size="14" font-weight="700" text-anchor="middle" font-family="Inter, ui-sans-serif">Alice</text>
      </g>
      <line x1="255" y1="420" x2="325" y2="420" stroke="#00E7F6" stroke-width="3" stroke-dasharray="8 8" class="flow-dash"/>
      <g class="float" style="animation-delay:.3s">
        <rect x="330" y="365" width="180" height="110" rx="16" fill="rgba(11,28,61,.85)" stroke="#6C4CFF" stroke-width="4"/>
        <text x="420" y="420" dy="5" fill="#FFFFFF" font-size="14" font-weight="700" text-anchor="middle" font-family="Inter, ui-sans-serif">Agent</text>
      </g>
      <g class="glow-pulse"><circle cx="590" cy="340" r="20" fill="#00E7F6"/></g>
      <line x1="510" y1="395" x2="680" y2="340" stroke="#00E7F6" stroke-width="5" marker-end="url(#arrowCyan)" class="flow-dash"/>
      <g class="float" style="animation-delay:.6s">
        <rect x="685" y="265" width="240" height="120" rx="16" fill="rgba(11,28,61,.95)" stroke="#B326FF" stroke-width="4"/>
        <text x="805" y="330" fill="#FFFFFF" font-size="16" font-weight="700" text-anchor="middle" font-family="Inter, ui-sans-serif">ARIA Shield</text>
      </g>
      <g class="glow-pulse"><circle cx="1020" cy="415" r="20" fill="#B326FF"/></g>
      <line x1="925" y1="315" x2="1070" y2="390" stroke="#B326FF" stroke-width="5" marker-end="url(#arrowPurple)" class="flow-dash"/>
      <g class="float" style="animation-delay:1s">
        <rect x="1075" y="345" width="280" height="140" rx="16" fill="rgba(11,28,61,.95)" stroke="#00E7F6" stroke-width="4"/>
        <text x="1215" y="415" fill="#FFFFFF" font-size="16" font-weight="700" text-anchor="middle" font-family="Inter, ui-sans-serif">PDP</text>
      </g>
    </svg>
  </div>
</div>
