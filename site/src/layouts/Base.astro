---
const { title = 'EmpowerNow', description = 'Identity & Authorization Fabric', canonical = '/', ogImage, hreflangs } = Astro.props as any;
import '../styles/tokens.css';
import '../styles/utilities.css';
import '../styles/custom-styles.css';
---
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title>{title}</title>
		<meta name="description" content={description} />
        <link rel="canonical" href={new URL(`${import.meta.env.BASE_URL}${String(canonical||'').replace(/^\//,'')}`, Astro.site)} />
		<meta name="theme-color" content="#0B1C3D" />
		<meta property="og:type" content="website" />
		<meta property="og:title" content={title} />
		<meta property="og:description" content={description} />
        <meta property="og:url" content={new URL(`${import.meta.env.BASE_URL}${String(canonical||'').replace(/^\//,'')}`, Astro.site)} />
		{(ogImage
			? <meta property="og:image" content={ogImage} />
			: <meta property="og:image" content={new URL(`${import.meta.env.BASE_URL}images/en-logo-dark.png`, Astro.site)} />)}
		<meta name="twitter:card" content="summary_large_image" />
		<meta name="twitter:title" content={title} />
		<meta name="twitter:description" content={description} />
		{(ogImage
			? <meta name="twitter:image" content={ogImage} />
			: <meta name="twitter:image" content={new URL(`${import.meta.env.BASE_URL}images/en-logo-dark.png`, Astro.site)} />)}
		{hreflangs && hreflangs.map((h: { href: string; lang: string }) => <link rel="alternate" hrefLang={h.lang} href={h.href} />)}
		<link rel="icon" href={`${import.meta.env.BASE_URL}favicon.svg`} />
		<link rel="preconnect" href="https://fonts.googleapis.com" />
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
		<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
		<!-- Removed unused preload to avoid console warning -->
		<!-- <link rel="preload" as="image" href={`${import.meta.env.BASE_URL}images/en-logo-dark.png`} fetchpriority="high" /> -->
		{String(canonical||'/') === '/' && (
			<link rel="preload" as="image" href={`${import.meta.env.BASE_URL}images/backgrounds/bg-homepage-hero.jpg`} fetchpriority="high" imagesizes="(max-width: 768px) 100vw, 480px" />
		)}
		<style>
			html,body{margin:0;background:var(--navy);color:#fff;font-family:Inter,-apple-system,sans-serif}
			main{min-height:60vh}
			/* Offset fixed navbar on pages without a hero stage */
			body[data-no-hero="true"] main{padding-top:96px}
			@media (max-width: 768px){ body[data-no-hero="true"] main{padding-top:104px} }
			footer{padding:32px 0;margin-top:80px}
			footer a{text-decoration:none}
			footer .btn{text-decoration:none}
			.footer-divider{height:1px;background:linear-gradient(90deg, transparent, rgba(0,231,246,.35), transparent);margin-bottom:60px}
			.footer-icon-tooltip:hover .tooltip-text{visibility:visible !important;opacity:1 !important}
			

			/* ============================================
			   EXISTING STYLES (PRESERVED)
			   ============================================ */
			
			.consent{position:fixed;bottom:16px;left:16px;right:16px;z-index:1100}
			.sr-only-focusable{position:absolute;left:-9999px;top:auto;width:1px;height:1px;overflow:hidden}
			.sticky-cta{position:fixed;left:0;right:0;bottom:0;z-index:1090;transform:translateY(110%);transition:transform .25s ease;backdrop-filter:blur(8px);background:rgba(15,27,51,.72);border-top:1px solid rgba(255,255,255,.12)}
			.sticky-cta.is-visible{transform:translateY(0)}
			/* Global link styles: avoid purple visited, underline only on hover */
			a{color:var(--on-bg);text-decoration:none}
			a:hover{color:var(--color-accent);text-decoration:underline}
			a:visited{color:var(--on-bg)}
			/* Visible focus ring for all focusable controls */
			a:focus-visible, button:focus-visible, .btn:focus-visible, summary:focus-visible, [role="button"]:focus-visible, .chip:focus-visible { outline:2px solid var(--pulse-cyan); outline-offset:2px; border-radius:6px }
			/* Nav styles moved to custom-styles.css */
		</style>
	</head>
    <body>
		<a href="#main" class="sr-only-focusable">Skip to content</a>
        <nav class="navbar" aria-label="Primary navigation" data-scrolled="false">
			<div class="navbar-inner">
				<div class="container wrap" style="display:flex;justify-content:space-between;align-items:center">
					<a href={import.meta.env.BASE_URL} style="display:inline-flex;align-items:center;gap:8px;text-decoration:none;margin-bottom:-2px">
						<img src={`${import.meta.env.BASE_URL}images/empowernow-logo.svg`} alt="EmpowerNow" width="140" height="28" decoding="async" fetchpriority="high" class="navbar-logo" />
					</a>
                <button id="nav-open" class="btn" aria-controls="mobile-nav" aria-expanded="false" style="display:none">Menu</button>
                <ul class="nav-links">
                    <li>
                        <div class="nav-group">
                            <button class="nav-link" id="btn-products" aria-haspopup="true" aria-expanded="false" aria-controls="menu-products" data-ev="nav_click" data-label="Products">Products</button>
                            <div id="menu-products" role="menu" aria-labelledby="btn-products" hidden class="mega" data-menu style="pointer-events:auto">
                                <div class="mega-inner container">
                                    <div class="mega-left">
                                        <div class="h3" style="margin:0 0 6px">Explore products</div>
                                        <div class="body">Create once → enforce everywhere → prove every action.</div>
                                        <a id="cta-products-hub" href={`${import.meta.env.BASE_URL}products/`} class="mega-cta">View all products →</a>
                                        <img src={`${import.meta.env.BASE_URL}images/illustrations/illustration-cube-panels.png`} alt="" class="mega-illustration" width="240" height="auto" loading="lazy" />
                                    </div>
                                    <div class="mega-grid">
                                        <a href={`${import.meta.env.BASE_URL}products/idp/`} class="mega-card" role="menuitem" tabindex="-1">
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-idp.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">IdP</div>
                                                    <div class="body">OAuth 2.1 + Token Exchange (RFC 8693); agent passports; pairwise subjects.</div>
                                                    <div class="links" style="display:none;"><span class="link">Learn more →</span></div>
                                                </div>
                                            </div>
                                        </a>
                                        <a href={`${import.meta.env.BASE_URL}products/pdp/`} class="mega-card" role="menuitem" tabindex="-1">
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-pdp.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">PDP</div>
                                                    <div class="body">OpenID AuthZEN PDP; standardized decisions with constraints/obligations/TTL.</div>
                                                    <div class="links" style="display:none;"><span class="link">Learn more →</span></div>
                                                </div>
                                            </div>
                                        </a>
                                        <a href={`${import.meta.env.BASE_URL}products/crud/`} class="mega-card" role="menuitem" tabindex="-1">
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-crud-service.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">CRUD Service</div>
                                                    <div class="body">No‑code connectors/workflows; MCP‑ready tools for MCP/Functions/Copilot; approvals & idempotency.</div>
                                                    <div class="links" style="display:none;"><span class="link">Learn more →</span></div>
                                                </div>
                                            </div>
                                        </a>
                                        <a href={`${import.meta.env.BASE_URL}products/data-collector/`} class="mega-card" role="menuitem" tabindex="-1">
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-data-collector.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Data Collector</div>
                                                    <div class="body">Identity/IGA inventory & lineage (accounts, entitlements, memberships, sources) feeding PDP/PIP.</div>
                                                    <div class="links" style="display:none;"><span class="link">Learn more →</span></div>
                                                </div>
                                            </div>
                                        </a>
                                        <a href={`${import.meta.env.BASE_URL}products/aria-shield/`} class="mega-card" role="menuitem" tabindex="-1">
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-aria-shield.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">ARIA Shield</div>
                                                    <div class="body">Runtime budgets (HTTP 402), streaming caps, zero‑token SPA; pre‑exec enforcement.</div>
                                                    <div class="links" style="display:none;"><span class="link">Learn more →</span></div>
                                                </div>
                                            </div>
                                        </a>
                                        <a href={`${import.meta.env.BASE_URL}products/gateway/`} class="mega-card" role="menuitem" tabindex="-1">
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-mcp-gateway.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">ARIA MCP Gateway</div>
                                                    <div class="body">Plan discipline & schema pins; deny off‑plan tool calls before execution.</div>
                                                    <div class="links" style="display:none;"><span class="link">Learn more →</span></div>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="nav-group">
                            <button class="nav-link" id="btn-solutions" aria-haspopup="true" aria-expanded="false" aria-controls="menu-solutions" data-ev="nav_click" data-label="Solutions">Solutions</button>
                            <div id="menu-solutions" role="menu" aria-labelledby="btn-solutions" hidden class="mega" data-menu style="pointer-events:auto">
                                <div class="mega-inner container">
                                    <div class="mega-left">
                                        <div class="h3" style="margin:0 0 6px">Explore solutions</div>
                                        <div class="body">OEM/white‑label for platforms, bundles for SIs, starter kits for enterprises.</div>
									<a id="cta-solutions-hub" href={`${import.meta.env.BASE_URL}solutions/`} class="mega-cta">View all solutions →</a>
                                        <img src={`${import.meta.env.BASE_URL}images/illustrations/illustration-package-panels.png`} alt="" class="mega-illustration" width="240" height="auto" loading="lazy" />
									<a href={`${import.meta.env.BASE_URL}products/aria/`} class="mega-cta">What is ARIA? →</a>
                                    </div>
                                    <div class="mega-grid">
                                        <div class="mega-card-solution" role="menuitem" tabindex="-1" data-primary-link={`${import.meta.env.BASE_URL}solutions/spend-governance/`}>
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-services-enterprise.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Spend Governance</div>
                                                    <div class="body">Budgets (402), stream caps, attribution; signed receipts for chargeback.</div>
                                                    <div class="links"><a class="link" href={`${import.meta.env.BASE_URL}solutions/spend-governance/`}>Get started →</a><a class="link-dim" href={`${import.meta.env.BASE_URL}products/receipts/`}>Receipts ↗</a></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mega-card-solution" role="menuitem" tabindex="-1" data-primary-link={`${import.meta.env.BASE_URL}solutions/agent-safe-tools/`}>
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-services-agents.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Agent‑Safe Tools</div>
                                                    <div class="body">MCP Gateway + Shield — schema pins, plan discipline, runtime caps.</div>
                                                    <div class="links"><a class="link" href={`${import.meta.env.BASE_URL}solutions/agent-safe-tools/`}>Learn more →</a><a class="link-dim" href={`https://empowerid.github.io/empowernow_docs/docs/services/mcp-gateway/`}>Docs ↗</a></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mega-card-solution" role="menuitem" tabindex="-1" data-primary-link={`${import.meta.env.BASE_URL}solutions/delegated-authorization/`}>
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-services-si.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Delegated Authorization</div>
                                                    <div class="body">Graph‑anchored delegations; per‑action constraints; explainable decisions.</div>
                                                    <div class="links"><a class="link" href={`${import.meta.env.BASE_URL}solutions/delegated-authorization/`}>Learn more →</a><a class="link-dim" href={`${import.meta.env.BASE_URL}resources/strategy/authz-model/`}>Model ↗</a></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mega-card-solution" role="menuitem" tabindex="-1" data-primary-link={`${import.meta.env.BASE_URL}solutions/audit-receipts/`}>
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-services-zero-token.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Audit & Receipts</div>
                                                    <div class="body">Provable evidence per call — share receipts with audit; chargeback spend.</div>
                                                    <div class="links"><a class="link" href={`${import.meta.env.BASE_URL}solutions/audit-receipts/`}>Learn more →</a><a class="link-dim" href={`${import.meta.env.BASE_URL}products/receipts/`}>Sample ↗</a></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mega-card-solution" role="menuitem" tabindex="-1" data-primary-link={`${import.meta.env.BASE_URL}products/crud/`}>
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-products-crud-service.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Tool Factory</div>
                                                    <div class="body">Any API → governed tools in minutes. Publish once to MCP/Functions/Copilot.</div>
                                                    <div class="links"><a class="link" href={`${import.meta.env.BASE_URL}products/crud/`}>Quickstart →</a><a class="link-dim" href={`${import.meta.env.BASE_URL}resources/`}>Adapter catalog ↗</a></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mega-card-solution" role="menuitem" tabindex="-1" data-primary-link={`${import.meta.env.BASE_URL}solutions/zero-token-spas/`}>
                                            <div class="mega-card-wrapper">
                                                <img src={`${import.meta.env.BASE_URL}images/icons/icon-mm-services-zero-token.png`} alt="" class="mega-card-icon" width="40" height="40" loading="lazy" />
                                                <div class="mega-card-content">
                                                    <div class="h3">Zero‑Token SPAs</div>
                                                    <div class="body">BFF/Shield pattern; tokens stay in the backend; route‑level policy.</div>
                                                    <div class="links"><a class="link" href={`${import.meta.env.BASE_URL}solutions/zero-token-spas/`}>Learn more →</a><a class="link-dim" href={`${import.meta.env.BASE_URL}docs/`}>Docs ↗</a></div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li>
                        <div class="nav-group">
                            <button class="nav-link" id="btn-resources" aria-haspopup="true" aria-expanded="false" aria-controls="menu-resources" data-ev="nav_click" data-label="Resources">Resources</button>
                            <div id="menu-resources" role="menu" aria-labelledby="btn-resources" hidden class="dropdown dropdown--center" data-menu>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}resources/`} class="dropdown-item">Overview</a>
                                <a role="menuitem" tabindex="-1" href={`https://empowerid.github.io/empowernow_docs/docs/services/crud-service/how-to/mcp-quickstart/`} class="dropdown-item">Quickstart</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}products/crud/`} class="dropdown-item">Adapter catalog</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}resources/`} class="dropdown-item">Workflow examples</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}resources/standards/`} class="dropdown-item">Standards</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}comparisons/gateway-vs-api-gateway/`} class="dropdown-item">MCP vs API Gateway</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}comparisons/authzen-vs-xacml/`} class="dropdown-item">AuthZEN vs XACML</a>
                            </div>
                        </div>
                    </li>
					<li><a class="nav-link" href="https://empowerid.github.io/empowernow_docs/" target="_blank" rel="noopener" data-ev="nav_click" data-label="Docs">Docs</a></li>
                    <li><a class="nav-link" href={`${import.meta.env.BASE_URL}pricing/`} data-ev="nav_click" data-label="Pricing">Pricing</a></li>
                    <li>
                        <div class="nav-group">
                            <button class="nav-link" id="btn-company" aria-haspopup="true" aria-expanded="false" aria-controls="menu-company" data-ev="nav_click" data-label="Company">Company</button>
                            <div id="menu-company" role="menu" aria-labelledby="btn-company" hidden class="dropdown" data-menu>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}company/`} class="dropdown-item">About</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}company/built-by-empowerid/`} class="dropdown-item">Built by EmpowerID</a>
                                <a role="menuitem" tabindex="-1" href={`${import.meta.env.BASE_URL}company/`} class="dropdown-item">Press & News</a>
                            </div>
                        </div>
                    </li>
                    <li><a class="btn btn-primary" href={`${import.meta.env.BASE_URL}demo/`} data-ev="cta_click" data-label="nav_demo" data-cta-level="hard" data-product="na" data-persona="na" data-stage="na">Book Demo</a></li>
				</ul>
				</div>
			</div>
            <div id="mobile-nav" hidden style="position:fixed;left:0;right:0;top:0;height:92vh;transform:translateY(-100%);transition:transform .18s ease; background:rgba(12,20,36,.95);backdrop-filter:blur(10px);border-bottom:1px solid rgba(255,255,255,.08);z-index:1050">
                <div class="container" style="padding:16px">
                    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
                        <strong>Menu</strong>
                        <button id="nav-close" class="btn">Close</button>
                    </div>
                    <div style="display:grid;gap:8px">
                        <a class="btn" href={`${import.meta.env.BASE_URL}products/`}>Products</a>
                        <a class="btn" href={`${import.meta.env.BASE_URL}solutions/`}>Solutions</a>
                        <a class="btn" href={`${import.meta.env.BASE_URL}resources/`}>Resources</a>
                        <a class="btn" href="https://empowerid.github.io/empowernow_docs/">Docs</a>
                        <a class="btn" href={`${import.meta.env.BASE_URL}pricing/`}>Pricing</a>
                        <a class="btn" href={`${import.meta.env.BASE_URL}company/`}>Company</a>
                        <div style="display:flex;gap:8px;margin-top:8px">
                            <a class="btn btn-primary" href={`${import.meta.env.BASE_URL}demo/`}>Book Demo</a>
                            <a class="btn" href={`https://empowerid.github.io/empowernow_docs/docs/services/crud-service/how-to/mcp-quickstart/`}>Quickstart</a>
                        </div>
                    </div>
                </div>
            </div>
		</nav>
        <div id="sticky-cta" class="sticky-cta" hidden>
            <div class="container" style="display:flex;gap:10px;justify-content:space-between;align-items:center;padding:10px">
                <div style="color:#9ba3b7;font-size:.95rem">Ship confidently — book a 15‑min demo.</div>
                <div style="display:flex;gap:8px">
                    <a class="btn btn-primary" data-ev="cta_click" data-label="book_demo_sticky" href={`${import.meta.env.BASE_URL}demo/`}>Book 15‑min demo</a>
                    <a class="btn" data-ev="cta_click" data-label="watch_demo_sticky" href={`${import.meta.env.BASE_URL}resources/demo/`}>Watch demo</a>
                </div>
            </div>
        </div>
        <main id="main">
			<slot />
		</main>
        <div class="footer-divider"></div>
        <footer class="site-footer" style={`background-image:url(${import.meta.env.BASE_URL}images/backgrounds/bg-footer.jpg);background-size:cover;background-position:center;background-repeat:no-repeat;padding:60px 0 120px`}>
            <div class="container footer-top">
                <div class="footer-brand">
                    <div style="display:inline-flex;align-items:center;gap:8px;text-decoration:none;margin-bottom:-2px">
                        <img src={`${import.meta.env.BASE_URL}images/empowernow-logo.svg`} alt="EmpowerNow" style="height:44px;width:auto;image-rendering:auto" loading="lazy" decoding="async" />
                    </div>
                    <div style="color:#9ba3b7;max-width:340px">Identity & Authorization Fabric for people, services, and AI agents.</div>
                    <div class="footer-trust" style="display:flex;gap:20px;margin-top:20px">
                        <div class="footer-icon-tooltip" style="position:relative;display:inline-block">
                            <img src={`${import.meta.env.BASE_URL}images/icons/icon-aa.png`} alt="AA compliant" style="width:32px;height:32px;cursor:help;transition:transform 0.2s ease" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'" />
                            <span class="tooltip-text" style="visibility:hidden;background-color:rgba(0,0,0,.9);color:#00E7F6;text-align:center;border-radius:6px;padding:6px 12px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-50px;opacity:0;transition:opacity 0.2s;font-size:13px;white-space:nowrap;border:1px solid rgba(0,231,246,0.3)">AA compliant</span>
                        </div>
                        <div class="footer-icon-tooltip" style="position:relative;display:inline-block">
                            <img src={`${import.meta.env.BASE_URL}images/icons/icon-receipts-sm.png`} alt="Receipts" style="width:32px;height:32px;cursor:help;transition:transform 0.2s ease" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'" />
                            <span class="tooltip-text" style="visibility:hidden;background-color:rgba(0,0,0,.9);color:#00E7F6;text-align:center;border-radius:6px;padding:6px 12px;position:absolute;z-index:1;bottom:125%;left:50%;margin-left:-35px;opacity:0;transition:opacity 0.2s;font-size:13px;white-space:nowrap;border:1px solid rgba(0,231,246,0.3)">Receipts</span>
                        </div>
                    </div>
                </div>
                <div class="footer-col"><h4>Product</h4><ul>
                    <li><a href={`${import.meta.env.BASE_URL}products/idp/`}>IdP</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}products/pdp/`}>PDP</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}products/gateway/`}>ARIA MCP Gateway</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}products/aria-shield/`}>ARIA Shield</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}products/crud/`}>CRUD Service</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}products/data-collector/`}>Data Collector</a></li>
                </ul></div>
                <div class="footer-col"><h4>Solutions</h4><ul>
							<li><a href={`${import.meta.env.BASE_URL}products/aria/`}>ARIA overview</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}solutions/audit-receipts/`}>Audit & Receipts</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}solutions/zero-token-spas/`}>Zero‑token SPAs</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}solutions/agent-safe-tools/`}>Agent‑safe tools</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}solutions/delegated-authorization/`}>Delegated auth</a></li>
                </ul></div>
                <div class="footer-col"><h4>Resources</h4><ul>
                    <li><a href={`${import.meta.env.BASE_URL}resources/`}>Overview</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}resources/standards/`}>Standards</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}comparisons/gateway-vs-api-gateway/`}>MCP vs API Gateway</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}comparisons/authzen-vs-xacml/`}>AuthZEN vs XACML</a></li>
                    <li><a href="https://empowerid.github.io/empowernow_docs/" target="_blank" rel="noopener">Docs ↗</a></li>
                </ul></div>
                <div class="footer-col"><h4>Company</h4><ul>
                    <li><a href={`${import.meta.env.BASE_URL}company/`}>About</a></li>
                    <li><a href={`${import.meta.env.BASE_URL}contact/`}>Contact</a></li>
                    <li><a href="https://github.com/empowerID/empowernow_info/blob/main/site/AUTHORING.md" target="_blank" rel="noopener">Authoring guide ↗</a></li>
                </ul></div>
            </div>
            <div class="container footer-bottom" style="margin-top:48px">
                <div>© {new Date().getFullYear()} EmpowerNow</div>
                <div style="display:flex;gap:16px;margin-top:24px">
                    <a class="btn" style="border-color:var(--color-accent);color:var(--color-accent);padding:12px 28px" href={`${import.meta.env.BASE_URL}demo/`}>Book demo</a>
                    <a class="btn" style="padding:12px 28px" href={`${import.meta.env.BASE_URL}resources/standards/`}>Explore standards</a>
                </div>
            </div>
            <div class="container" style="text-align:center;margin-top:48px">
                <button id="back-to-top" class="btn btn-ghost" style="border:2px solid rgba(255,255,255,.2);color:#e8ecff;padding:12px 28px;font-size:15px;transition:all 0.3s ease;opacity:0.8" onmouseover="this.style.opacity='1';this.style.transform='translateY(-2px)'" onmouseout="this.style.opacity='0.8';this.style.transform='translateY(0)'">
                    <span style="display:inline-block;transition:transform 0.3s ease">↑</span> Back to top
                </button>
            </div>
        </footer>
        <script>
            (function(){
                const btn = document.getElementById('back-to-top');
                if(btn){
                    const arrow = btn.querySelector('span');
                    btn.addEventListener('click', () => {
                        window.scrollTo({ top: 0, behavior: 'smooth' });
                        if(arrow){
                            arrow.style.transform = 'translateY(-4px)';
                            setTimeout(() => arrow.style.transform = 'translateY(0)', 300);
                        }
                    });
                }
            })();
        </script>
		<div id="consent" class="consent" hidden>
			<div class="glass-card" style="padding:12px;display:flex;justify-content:space-between;align-items:center;gap:12px">
				<div style="color:#9ba3b7">We use analytics to improve your experience.</div>
				<div style="display:flex;gap:8px">
					<button id="consent-accept" class="btn btn-primary">Allow</button>
					<button id="consent-decline" class="btn">Decline</button>
				</div>
			</div>
		</div>
		<script>
			// ============================================
			// ENHANCED FLOATING NAVIGATION - Scroll Detection
			// ============================================
			(function(){
				try{
					const nav = document.querySelector('nav.navbar');
					if(!nav) return;
					
					let ticking = false;
					const threshold = 50; // Scroll threshold in pixels
					
					function updateNavState() {
						const scrollY = window.scrollY;
						const shouldFloat = scrollY > threshold;
						nav.setAttribute('data-scrolled', shouldFloat ? 'true' : 'false');
						ticking = false;
					}
					
					function onScroll() {
						if (!ticking) {
							window.requestAnimationFrame(updateNavState);
							ticking = true;
						}
					}
					
					// Initialize state on load
					updateNavState();
					
			// Listen to scroll (passive for performance)
			window.addEventListener('scroll', onScroll, { passive: true });
		}catch{}
	})();
	</script>
	<script>
		// ============================================
		// SOLUTION CARDS - Make entire card clickable
		// ============================================
		(function(){
			try{
				document.querySelectorAll('.mega-card-solution').forEach(card => {
					const primaryLink = card.getAttribute('data-primary-link');
					if (!primaryLink) return;
					
					card.addEventListener('click', (e) => {
						// Don't navigate if clicking on a link inside
						const target = e.target as HTMLElement;
						if (target.tagName === 'A' || target.closest('a')) {
							return;
						}
						
						// Navigate to primary link
						window.location.href = primaryLink;
					});
				});
			}catch{}
		})();
	</script>
	<script>
			(function(){
				try{
                    const consentKey = 'analytics_consent';
                    const dnt = (navigator as any).doNotTrack==='1' || (window as any).doNotTrack==='1';
					const consentEl = document.getElementById('consent');
					const acceptBtn = document.getElementById('consent-accept');
					const declineBtn = document.getElementById('consent-decline');
					const has = localStorage.getItem(consentKey);
                    if(!has && consentEl && !dnt){ consentEl.hidden = false; }
					function setConsent(val){ localStorage.setItem(consentKey, val); if(consentEl) consentEl.hidden = true; }
					acceptBtn && acceptBtn.addEventListener('click', function(){ setConsent('yes'); });
					declineBtn && declineBtn.addEventListener('click', function(){ setConsent('no'); });
                    document.addEventListener('click', function(e){
						const t = e.target as HTMLElement;
						const el = t && (t.closest('[data-ev]') as HTMLElement | null);
						if(!el) return;
                        if(dnt || localStorage.getItem(consentKey) !== 'yes') return;
                        const type = el.getAttribute('data-ev') || 'event';
                        const label = el.getAttribute('data-label') || '';
                        const action = el.getAttribute('data-action') || '';
                        const position = el.getAttribute('data-position') || '';
                        const cta_level = el.getAttribute('data-cta-level') || 'soft';
                        const product = el.getAttribute('data-product') || 'na';
                        const persona = el.getAttribute('data-persona') || 'na';
                        const stage = el.getAttribute('data-stage') || 'na';
                        const url = new URL(location.href);
                        const utm_campaign = url.searchParams.get('utm_campaign') || '';
                        const utm_persona = url.searchParams.get('utm_persona') || '';
                        const utm_stage = url.searchParams.get('utm_stage') || '';
                        const record = {
                            timestamp: new Date().toISOString(),
                            event: type,
                            cta_level,
                            page: location.pathname,
                            product,
                            persona,
                            stage,
                            utm_campaign,
                            utm_persona,
                            utm_stage,
                            metadata: { label, action, position }
                        };
                        (window as any).dataLayer = (window as any).dataLayer || [];
                        (window as any).dataLayer.push(record);
                        try {
                            const key = 'marketing_events_jsonl';
                            const prev = localStorage.getItem(key) || '';
                            const line = JSON.stringify(record);
                            localStorage.setItem(key, prev ? (prev + '\n' + line) : line);
                        } catch {}
					});
				}catch{}
			})();
		</script>
		<script>
			// ============================================
			// ENHANCED FLOATING NAVIGATION - Scroll Detection
			// ============================================
			(function(){
				try{
					const nav = document.querySelector('nav.navbar');
					if(!nav) return;

					let ticking = false;
					const hasHeroStage = !!document.querySelector('.page-stage');
					const threshold = hasHeroStage ? 50 : -1; // float immediately if no hero

					function updateNavState() {
						const scrollY = window.scrollY;
						const shouldFloat = scrollY > threshold;
						nav.setAttribute('data-scrolled', shouldFloat ? 'true' : 'false');
						ticking = false;
					}

					function onScroll() {
						if (!ticking) {
							window.requestAnimationFrame(updateNavState);
							ticking = true;
						}
					}

					// Initialize state on load
					updateNavState();

					// Listen to scroll (passive for performance)
					window.addEventListener('scroll', onScroll, { passive: true });
				}catch{}
			})();
		</script>
		<script type="module">
			// Mermaid diagrams support (render elements with class="mermaid")
			try {
				import('https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs')
					.then((m)=>{
						try{
							const mermaid = (m && (m.default||m));
							mermaid.initialize({
								startOnLoad: true,
								theme: 'base',
								securityLevel: 'loose',
								flowchart: { useMaxWidth: false, htmlLabels: true, diagramPadding: 8 },
								themeVariables: {
									primaryColor: '#0B1C3D',
									primaryBorderColor: '#00E7F6',
									primaryTextColor: '#FFFFFF',
									secondaryColor: '#6C4CFF',
									secondaryBorderColor: '#B326FF',
									secondaryTextColor: '#FFFFFF',
									tertiaryColor: '#0E0E10',
									tertiaryBorderColor: '#6C4CFF',
									tertiaryTextColor: '#EDEDED',
									background: '#0E0E10',
									mainBkg: '#0B1C3D',
									secondBkg: '#6C4CFF',
									tertiaryBkg: '#0B1C3D',
									lineColor: '#00E7F6',
									textColor: '#EDEDED',
									nodeBkg: '#0B1C3D',
									nodeTextColor: '#EDEDED',
									clusterBkg: 'rgba(11, 28, 61, 0.85)',
									clusterBorder: 'rgba(0, 231, 246, 0.2)',
									edgeLabelBackground: '#0B1C3D',
									actorBorder: '#00E7F6',
									actorBkg: '#0B1C3D',
									actorTextColor: '#EDEDED',
									actorLineColor: '#00E7F6',
									labelBoxBkgColor: '#0B1C3D',
									labelBoxBorderColor: '#00E7F6',
									labelTextColor: '#EDEDED',
									noteBkgColor: '#6C4CFF',
									noteTextColor: '#FFFFFF',
									noteBorderColor: '#B326FF',
									fontFamily: '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif',
									fontSize: '14px'
								}
							});
							// Ensure render on first load
							requestAnimationFrame(()=>{
								try{ mermaid.run && mermaid.run({ querySelector: '.mermaid' }); }catch{}
								try{ mermaid.init && mermaid.init(undefined, document.querySelectorAll('.mermaid')); }catch{}
							});
						}catch{}
					})
				.catch(()=>{});
			} catch {}
		</script>
        <script>
            (function(){
                try{
                    (window as any).metrics = (window as any).metrics || {};
                    (window as any).metrics.exportJSONL = function(){
                        try{
                            const key = 'marketing_events_jsonl';
                            const blob = new Blob([localStorage.getItem(key) || ''], { type: 'application/jsonl' });
                            const a = document.createElement('a');
                            a.href = URL.createObjectURL(blob);
                            a.download = 'events.jsonl';
                            document.body.appendChild(a); a.click(); document.body.removeChild(a);
                        }catch{}
                    };
                }catch{}
            })();
        </script>
		<script>
			(function(){
				try{
					// Mark current nav link for a11y
					const navLinks = document.querySelectorAll('nav .nav-links a[href^="/"]');
					navLinks.forEach((a)=>{
						try{
							const url = new URL((a as HTMLAnchorElement).href, location.origin);
							if(url.pathname === location.pathname){ (a as HTMLElement).setAttribute('aria-current','page'); }
						}catch{}
					});
                    const run = () => {
						const UTM = new URLSearchParams({ utm_source:'www', utm_medium:'cta', utm_campaign: (document.querySelector('[data-position]')?.getAttribute('data-position') || 'site') });
						function appendUtm(a){
							try{
								const href = a.getAttribute('href');
								if(!href || href.startsWith('mailto:') || href.startsWith('tel:')) return;
								const url = new URL(href, location.origin);
								if(url.origin !== location.origin) return; // keep internal only
								const q = new URLSearchParams(url.search);
								UTM.forEach((v,k)=>{ if(!q.has(k)) q.set(k,v); });
								url.search = q.toString();
								a.setAttribute('href', url.pathname + (url.search ? ('?' + url.search) : '') + (url.hash||''));
							}catch{}
						}
                        document.querySelectorAll('a[data-ev]')?.forEach(appendUtm);
                        // Mobile sheet nav
                        const openBtn=document.getElementById('nav-open') as HTMLButtonElement|null;
                        const closeBtn=document.getElementById('nav-close') as HTMLButtonElement|null;
                        const sheet=document.getElementById('mobile-nav') as HTMLDivElement|null;
                        function setOpen(v:boolean){ if(!(openBtn&&sheet)) return; openBtn.setAttribute('aria-expanded', String(v)); sheet.hidden=false; (sheet as HTMLElement).style.transform = v? 'translateY(0)': 'translateY(-100%)'; if(!v) setTimeout(()=>{ if(sheet) sheet.hidden=true; },180); }
                        function mq(){ return matchMedia('(max-width: 768px)').matches; }
                        if(openBtn && sheet){
                            openBtn.style.display = mq()? 'inline-flex':'none';
                            window.addEventListener('resize', ()=> openBtn.style.display = mq()? 'inline-flex':'none');
                            openBtn.addEventListener('click', ()=> setOpen(true));
                            closeBtn && closeBtn.addEventListener('click', ()=> setOpen(false));
                            document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') setOpen(false); });
                        }
                        // Mega menu interactions (Products & Solutions)
                        const consentKey='analytics_consent';
                        const dnt = (navigator as any).doNotTrack==='1' || (window as any).doNotTrack==='1';
                        function pl(ev:any){ if(dnt || localStorage.getItem(consentKey)!=='yes') return; (window as any).dataLayer=(window as any).dataLayer||[]; (window as any).dataLayer.push(ev);}
                        // Global menu manager ensures only one menu is open at a time
                        const allMenus = Array.from(document.querySelectorAll('[data-menu]')) as HTMLElement[];
                        const allTriggers = Array.from(document.querySelectorAll('[aria-haspopup="true"]')) as HTMLElement[];
                        function closeAll(){
                            allTriggers.forEach(b=> b.setAttribute('aria-expanded','false'));
                            allMenus.forEach(m=> m.hidden = true);
                            // unlock scroll on mobile when any menu closes
                            if(matchMedia('(max-width: 768px)').matches){ document.documentElement.style.overflow = ''; }
                        }
                        const navRoot = document.querySelector('nav');
                        navRoot && navRoot.addEventListener('mouseleave', closeAll);
                        document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeAll(); });

                        function wireMenu(btnId:string, menuId:string, name:string){
                            const trigger = document.getElementById(btnId) as HTMLButtonElement | null;
                            const menu = document.getElementById(menuId) as HTMLDivElement | null;
                            if(!(trigger && menu)) return;
                            let hoverTimer:any=null;
                            function open(){ closeAll(); trigger.setAttribute('aria-expanded','true'); menu.hidden=false; if(matchMedia('(max-width: 768px)').matches){ document.documentElement.style.overflow = 'hidden'; } pl({event:'menu_open', menu:name}); }
                            function close(){ trigger.setAttribute('aria-expanded','false'); menu.hidden=true; }
                            trigger.addEventListener('mouseenter', ()=> { clearTimeout(hoverTimer); hoverTimer=setTimeout(open,120); });
                            trigger.addEventListener('mouseleave', ()=> { clearTimeout(hoverTimer); });
                            trigger.addEventListener('click', (e)=>{ const ex = trigger.getAttribute('aria-expanded')==='true'; if(ex){ e.preventDefault(); close(); } else { // when closed, allow default navigation for hubs
                                const href = trigger.id==='btn-products' ? `${location.origin}${import.meta.env.BASE_URL}products/` : (trigger.id==='btn-solutions'? `${location.origin}${import.meta.env.BASE_URL}solutions/` : '');
                                if(href){ if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)) { e.preventDefault(); location.href = href; (window as any).dataLayer=(window as any).dataLayer||[]; pl({event:'menu_hub_click', menu:name, source:'label'}); } }
                                else { e.preventDefault(); open(); }
                            } });
                            // Keyboard open on focus/ArrowDown/Space
                            trigger.addEventListener('focus', ()=> setTimeout(open, 0));
                            trigger.addEventListener('keydown', (e)=>{ if(e.key==='ArrowDown' || e.key===' '){ e.preventDefault(); open(); (menu.querySelector('.mega-cta') as HTMLElement)?.focus?.(); } });
                            menu.addEventListener('mouseleave', close);
                            document.addEventListener('click', (e)=>{ const t=e.target as HTMLElement; if(!t.closest('.nav-group') && !t.closest('[data-menu]')) closeAll(); });
                            // track clicks on primary links inside cards
                            menu.querySelectorAll('.mega-card .link').forEach((a)=> a.addEventListener('click', ()=> pl({event:'menu_item_click', menu:name, item:(a as HTMLElement).closest('.mega-card')?.querySelector('.h3')?.textContent?.trim()||''})));
                        }
                        wireMenu('btn-products','menu-products','products');
                        wireMenu('btn-solutions','menu-solutions','solutions');
                        wireMenu('btn-resources','menu-resources','resources');
                        wireMenu('btn-company','menu-company','company');
                        // Hub CTA analytics
                        document.getElementById('cta-products-hub')?.addEventListener('click', ()=> pl({event:'menu_hub_click', menu:'products', source:'cta'}));
                        document.getElementById('cta-solutions-hub')?.addEventListener('click', ()=> pl({event:'menu_hub_click', menu:'solutions', source:'cta'}));
					};
                    if('requestIdleCallback' in window){ (window as any).requestIdleCallback(run); } else { setTimeout(run, 0); }
                    // Sticky mobile CTA after ~20% scroll
                    const bar = document.getElementById('sticky-cta');
                    function showSticky(){
                        if(!bar) return;
                        const isMobile = matchMedia('(max-width: 768px)').matches;
                        const threshold = Math.max(240, Math.round(document.documentElement.scrollHeight * 0.2));
                        if(isMobile && window.scrollY > threshold){ bar.hidden = false; bar.classList.add('is-visible'); }
                        else { bar.classList.remove('is-visible'); }
                    }
                    window.addEventListener('scroll', showSticky, { passive:true });
                    window.addEventListener('resize', showSticky);
                    showSticky();
				}catch{}
			})();
		</script>
	</body>
</html>
